<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ColdTreasure | Post</title>

  <link rel="stylesheet" href="/assets/css/main.css?v=203" />

  <style>
    :root { --w: 980px; --muted:#777; --line:#eee; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans SC", Arial;
      background:#fff;
      color:#111;
    }

    main{ max-width: var(--w); margin: 24px auto 64px; padding: 0 18px; }

    .meta{
      color:var(--muted);
      font-size:14px;
      margin: 8px 0 18px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }

    h1{ font-size:30px; line-height:1.2; margin:0 0 8px; letter-spacing:.2px; }

    .hero{
      width:100%;
      border-radius:14px;
      overflow:hidden;
      background:#f6f6f6;
      border:1px solid var(--line);
      aspect-ratio: 3 / 2;
    }
    .hero img{
      width:100%;
      height:100%;
      object-fit:cover;
      object-position: var(--hero-focus, 50% 50%);
      display:block;
    }

    .summary{ font-size:16px; line-height:1.7; margin: 16px 0 6px; color:#222; }

    .content{ margin-top:18px; font-size:16px; line-height:1.85; }
    .content h2{ font-size:18px; margin: 22px 0 10px; }
    .content p{ margin: 12px 0; }
    .content ul{ margin: 10px 0 14px 18px; }

    /* ✅ 新增：发售信息独立区（结构钉死，内容由 post.js 填充） */
    .post-release{
      margin-top: 22px;
      padding-top: 18px;
      border-top: 1px solid var(--line);
    }
    .post-release h2{
      font-size:18px;
      margin: 0 0 10px;
    }
    .post-release ul{
      margin: 10px 0 0 18px;
    }
    .post-release p{
      margin: 10px 0;
    }

    .gallery{ margin-top:26px; }
    .gallery h2{ font-size:18px; margin:0 0 10px; }
    .grid{ display:grid; grid-template-columns: repeat(2, 1fr); gap:10px; }
    .grid img{
      width:100%;
      height:auto;
      border-radius:12px;
      border:1px solid var(--line);
      background:#f6f6f6;
      display:block;
    }

    .error{ padding:14px; border:1px solid #ffd0d0; background:#fff5f5; border-radius:14px; }
    .muted{ color:var(--muted); }

    @media (max-width: 720px){
      .grid{ grid-template-columns: 1fr; }
      h1{ font-size:26px; }
    }
  </style>

  <!-- ✅ 统一：在脚本前声明页面类型 -->
  <script>window.CT_PAGE = "post";</script>
  <script src="/assets/js/include.v3.js?v=3" defer></script>
  <!-- ✅ 重要：post 页只需要 post.js（不要再加载 app.js） -->
  <script src="/assets/js/post.js?v=5" defer></script>
</head>

<body>
  <div data-include="/modules/header/header.html"></div>

  <!-- ✅ post.js 会把文章渲染到 #app -->
  <main id="app">
    <div class="muted">Loading…</div>
  </main>

  <div data-include="/modules/footer/footer.html"></div>

  <!-- ✅ 结构模板（可选）：给 post.js 复制用，避免 innerHTML 写错 -->
  <template id="tpl-post">
    <article class="post">
      <header class="post-head">
        <h1 class="post-title"></h1>
        <div class="meta post-meta"></div>
      </header>

      <figure class="hero">
        <img class="post-hero" alt="" />
      </figure>

      <div class="summary post-summary"></div>

      <section class="content post-content"></section>

      <!-- ✅ 发售信息固定出口：旧文从正文提取过来 / 新文直接渲染 -->
      <section class="post-release" data-release>
        <h2>发售信息</h2>
        <div class="post-release__body" data-release-body></div>
      </section>

      <section class="gallery post-gallery" hidden>
        <h2>图集</h2>
        <div class="grid post-grid"></div>
      </section>
    </article>
  </template>
</body>
</html>
